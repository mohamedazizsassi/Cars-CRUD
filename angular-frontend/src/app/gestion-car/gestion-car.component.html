<div class="inventory-management">
    <div class="page-header">
        <div>
            <h1 class="page-title">
                <i class="fas fa-warehouse"></i> Inventory Management
            </h1>
            <p class="page-subtitle">Manage your dealership's vehicle inventory</p>
        </div>
        <button class="btn btn-add-vehicle" routerLink="/ajouter">
            <i class="fas fa-plus-circle"></i> Add Vehicle
        </button>
    </div>

    <div class="search-section">
        <div class="search-wrapper">
            <i class="fas fa-search search-icon"></i>
            <input type="text" class="search-input" placeholder="Search by name, brand, or specifications..."
                [(ngModel)]="searchTerm" (ngModelChange)="filterCars()">
        </div>
        <div class="results-info">
            <span class="results-count">{{ filteredCarData.length }} vehicles found</span>
        </div>
    </div>

    <div class="inventory-table-container">
        <table class="inventory-table">
            <thead>
                <tr>
                    <th><i class="fas fa-car"></i> Vehicle Name</th>
                    <th><i class="fas fa-building"></i> Brand</th>
                    <th><i class="fas fa-info-circle"></i> Specifications</th>
                    <th><i class="fas fa-dollar-sign"></i> Price</th>
                    <th><i class="fas fa-tools"></i> Actions</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let car of paginatedCars" class="table-row">
                    <td class="vehicle-name-cell">
                        <strong>{{ car.nom }}</strong>
                    </td>
                    <td>
                        <span class="brand-badge">{{ car.marque }}</span>
                    </td>
                    <td class="specs-cell">{{ car.caracteristique }}</td>
                    <td class="price-cell">${{ car.prix | number:'1.0-0' }}</td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn-action btn-edit" (click)="onEdit(car)" title="Edit">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn-action btn-delete" (click)="confirmDelete(car.id)" title="Delete">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="pagination-container">
        <button class="btn-pagination" (click)="prevPage()" [disabled]="currentPage === 1">
            <i class="fas fa-chevron-left"></i> Previous
        </button>

        <div class="page-info">
            <span class="page-numbers">Page {{ currentPage }} of {{ totalPages }}</span>
        </div>

        <button class="btn-pagination" (click)="nextPage()" [disabled]="currentPage === totalPages">
            Next <i class="fas fa-chevron-right"></i>
        </button>
    </div>
</div>

<!-- Edit Modal -->
<div class="modal-overlay" *ngIf="selectedCarId !== null" (click)="selectedCarId = null">
    <div class="modal-dialog" (click)="$event.stopPropagation()">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">
                    <i class="fas fa-edit"></i> Edit Vehicle
                </h3>
                <button class="btn-close-modal" (click)="selectedCarId = null">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form [formGroup]="editForm" (ngSubmit)="updateCar()">
                    <div class="form-group">
                        <label for="nom">
                            <i class="fas fa-tag"></i> Vehicle Name
                        </label>
                        <input id="nom" type="text" class="form-control" formControlName="nom" required>
                    </div>
                    <div class="form-group">
                        <label for="marque">
                            <i class="fas fa-building"></i> Brand
                        </label>
                        <input id="marque" type="text" class="form-control" formControlName="marque" required>
                    </div>
                    <div class="form-group">
                        <label for="caracteristique">
                            <i class="fas fa-cogs"></i> Specifications
                        </label>
                        <textarea id="caracteristique" class="form-control" formControlName="caracteristique" rows="3"
                            required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="prix">
                            <i class="fas fa-dollar-sign"></i> Price
                        </label>
                        <input id="prix" type="number" class="form-control" formControlName="prix" required>
                    </div>
                    <div class="form-group">
                        <label for="picture">
                            <i class="fas fa-image"></i> Image URL
                        </label>
                        <input id="picture" type="text" class="form-control" formControlName="picture" required>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn btn-cancel" (click)="selectedCarId = null">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                        <button type="submit" class="btn btn-save" [disabled]="editForm.invalid">
                            <i class="fas fa-check"></i> Save Changes
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>